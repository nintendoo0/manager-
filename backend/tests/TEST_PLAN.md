# План тестирования системы контроля дефектов

**Дата создания:** 14 октября 2025 г.  
**Версия:** 1.0  
**Проект:** Система контроля дефектов

---

## 1. Цели тестирования

- Проверить корректность работы всех основных функций системы
- Убедиться в правильности работы прав доступа для разных ролей
- Проверить устойчивость системы к нагрузкам
- Подтвердить соответствие требованиям заказчика (User Stories)
- Обеспечить отклик системы ≤ 1 секунды при реальной нагрузке

---

## 2. Объекты тестирования

### 2.1 Backend API
- Аутентификация и авторизация
- CRUD операции с проектами
- CRUD операции с дефектами
- Управление пользователями (только admin)
- Экспорт отчётов в CSV
- Комментарии к дефектам

### 2.2 Frontend
- Интерфейс авторизации
- Управление проектами
- Управление дефектами
- Фильтрация и поиск
- Экспорт данных

---

## 3. Типы тестирования

### 3.1 Юнит-тесты (Unit Tests)
**Цель:** Проверка отдельных функций и модулей

**Покрытие:**
- Auth Controller: регистрация, логин, получение профиля
- Project Controller: создание, обновление, удаление проектов
- Defect Controller: создание, обновление дефектов
- Middleware: проверка токенов, прав доступа
- Utilities: форматирование данных, валидация

**Критерий успеха:** ≥ 5 юнит-тестов, покрытие кода ≥ 70%

### 3.2 Интеграционные тесты (Integration Tests)
**Цель:** Проверка взаимодействия между компонентами

**Сценарии:**
1. **Полный цикл работы с проектом:**
   - Регистрация пользователя → Логин → Создание проекта → Получение списка проектов
   
2. **Полный цикл работы с дефектом:**
   - Создание дефекта → Получение деталей → Добавление комментария → Обновление статуса

**Критерий успеха:** ≥ 2 интеграционных сценария выполнены успешно

### 3.3 Тестирование User Stories
**Цель:** Подтверждение выполнения требований пользователей

**User Stories для проверки:**

| ID | Роль | История | Критерий приёмки |
|----|------|---------|------------------|
| US-01 | Admin | Регистрация пользователей | Админ может создавать пользователей с разными ролями |
| US-02 | Manager | Создание проектов | Менеджер может создавать и редактировать проекты |
| US-03 | Manager | Создание дефектов | Менеджер может создавать дефекты в проектах |
| US-04 | Engineer | Просмотр дефектов | Инженер может видеть дефекты, но не создавать |
| US-05 | Manager/Admin | Экспорт отчётов | Только admin и manager могут экспортировать CSV |
| US-06 | All | Комментирование | Все роли могут добавлять комментарии к дефектам |
| US-07 | Manager/Admin | Редактирование статуса | Только admin и manager могут менять статус дефекта |

**Критерий успеха:** Все User Stories проходят без ошибок

### 3.4 Нагрузочное тестирование (Load Testing)
**Цель:** Проверка производительности при реальной нагрузке

**Параметры:**
- Количество одновременных пользователей: 50
- Длительность теста: 30 секунд
- Тестируемые эндпоинты:
  - GET /api/defects
  - GET /api/projects
  - POST /api/defects
  - GET /api/reports/defects

**Критерий успеха:** Средний отклик ≤ 1 секунды

### 3.5 Регрессионное тестирование
**Цель:** Исключение появления старых ошибок

**Подход:**
- Повторное выполнение всех юнит и интеграционных тестов после каждого изменения кода
- Автоматический запуск тестов при каждом коммите (CI/CD)

**Критерий успеха:** Все тесты проходят после изменений

---

## 4. Тестовые данные

### 4.1 Пользователи
```
Admin: admin / admin123
Manager: manager / manager123
Engineer: engineer / engineer123
Observer: observer / observer123
```

### 4.2 Проекты
- Тестовый проект 1 (активный)
- Тестовый проект 2 (приостановлен)
- Тестовый проект 3 (завершён)

### 4.3 Дефекты
- 10+ дефектов с разными статусами и приоритетами
- Дефекты в разных проектах
- Дефекты с комментариями

---

## 5. Инструменты тестирования

### Backend
- **Jest** — фреймворк для тестирования
- **Supertest** — тестирование HTTP API
- **autocannon** — нагрузочное тестирование

### Frontend
- **Jest** + **React Testing Library** — тестирование компонентов
- **Cypress** (опционально) — E2E тестирование

---

## 6. Метрики качества

| Метрика | Целевое значение | Текущее |
|---------|------------------|---------|
| Покрытие кода тестами | ≥ 70% | TBD |
| Количество юнит-тестов | ≥ 5 | TBD |
| Количество интеграционных тестов | ≥ 2 | TBD |
| Средний отклик API | ≤ 1 сек | TBD |
| Процент прохождения тестов | 100% | TBD |

---

## 7. График выполнения

1. **Подготовка тестовой среды** — 1 день
2. **Разработка юнит-тестов** — 2 дня
3. **Разработка интеграционных тестов** — 2 дня
4. **Проверка User Stories** — 1 день
5. **Нагрузочное тестирование** — 1 день
6. **Анализ результатов и исправление** — 2 дня

**Общая длительность:** 9 дней

---

## 8. Риски и ограничения

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Недостаточное покрытие тестами | Средняя | Высокое | Контроль покрытия на CI/CD |
| Низкая производительность | Низкая | Высокое | Оптимизация запросов БД |
| Ошибки в правах доступа | Средняя | Высокое | Дополнительные тесты для ролей |

---

## 9. Критерии завершения тестирования

✅ Все юнит-тесты проходят успешно  
✅ Все интеграционные тесты проходят успешно  
✅ Все User Stories проверены и приняты  
✅ Нагрузочное тестирование показывает отклик ≤ 1 сек  
✅ Покрытие кода ≥ 70%  
✅ Критических и высоких багов нет

---

## 10. Отчётность

После завершения тестирования предоставляются:
- Отчёт о покрытии кода (coverage report)
- Отчёт о нагрузочном тестировании
- Список найденных и исправленных багов
- Чек-лист проверки User Stories
